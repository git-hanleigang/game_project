{"version":3,"sources":["file:///Users/xcyy/Desktop/createrPro/cashSlot/assets/scripts/reelRoll.ts"],"names":["_decorator","Component","Node","Singleton","symbolNode","ccclass","property","reelRoll","Number","singleton","getInstance","symbolList","currMoveLength","reelRowNum","colNum","rollStates","quickStop","rollSymbolTypes","rollPoint","rollListLength","symbolHeight","start","reelColAndRow","length","curColIndex","rollList","initReel","update","deltaTime","iRow","addNode","getUnActiveSymbol","symbolType","getSmbolType","active","createSymbolNode","newNode","node","addChild","script","addComponent","init","updateSymbolNodeInfo","getComponent","removePosY","sy","row","symbolListLength","index","beginReel","stopReel"],"mappings":"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","sourcesContent":["import { _decorator, Component, EditBox, Node, UITransform } from 'cc';\nconst { ccclass, property } = _decorator;\nimport Singleton from './Singleton';\nimport { symbolNode } from './symbolNode';\n\n@ccclass('reelRoll')\nexport class reelRoll extends Component {\n    public singleton: Singleton = Singleton.getInstance()\n    public symbolList: Node[] = []\n    public currMoveLength: number = 0\n    public reelRowNum: number = 0\n    public colNum: number = null; // 行配置\n    public rollStates: boolean = false\n    public quickStop: boolean = false\n    public rollSymbolTypes: number[] = []\n    public rollPoint: number = 0; // 滚动指针\n    public rollListLength: number = null; // 滚动指针\n    @property(Number)\n    public curColIndex: number = 0\n    public symbolHeight: any = 160;\n    start() {\n        this.colNum = this.singleton.reelColAndRow.length\n        this.reelRowNum = this.singleton.reelColAndRow[this.curColIndex]\n        this.rollSymbolTypes = this.singleton.rollList[this.curColIndex]\n        this.rollPoint = 0\n        this.rollListLength = this.rollSymbolTypes.length\n\n        this.initReel()\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    initReel(){\n        for(let iRow = 1; iRow < this.reelRowNum; iRow++){\n            let addNode = this.getUnActiveSymbol(iRow)\n            let symbolType = this.getSmbolType()\n            if (addNode != null){\n                addNode.active = true\n            }else{\n                // addNode = this.cr\n            }\n        }\n    }\n\n    public createSymbolNode(symbolType: number, iRow: number): Node {\n        let newNode = new Node()\n        this.node.addChild(newNode)\n\n        // let uiTra = newNode.addComponent(UITransform)\n        // uiTra.anchorX = 0.5\n        // uiTra.anchorY = 0 \n\n        let script = newNode.addComponent(symbolNode)\n        script.init()\n\n        return newNode\n    }\n\n    updateSymbolNodeInfo(node: Node, iRow: number, symbolType: number) {\n        // node.setSiblingIndex(symbolType)\n        let script = node.getComponent(symbolNode)\n        script.iRow = iRow\n        script.symbolType = symbolType\n\n        script.removePosY = -this.sy\n    }\n\n    public getSmbolType(): number{\n        let symbolType = this.rollSymbolTypes[this.rollPoint] \n        this.rollPoint = this.rollPoint + 1\n        if (this.rollPoint >= this.rollListLength ) {\n            this.rollPoint = 0\n        }\n        return symbolType\n    }\n\n    public getUnActiveSymbol(row: number): any{\n        let symbolListLength = this.symbolList.length\n        for(let index = 0; index < symbolListLength; index++){\n            let node = this.symbolList[index]\n            if (node.active == false){\n                return node\n            }\n        }\n        return null\n    }\n\n    public beginReel(){\n        this.currMoveLength = 0\n        this.rollStates = true\n        this.quickStop = false\n    }\n\n    public stopReel(){\n        this.rollStates = false\n\n    }\n}\n\n"]}